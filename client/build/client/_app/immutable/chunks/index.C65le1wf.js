import{w as m}from"./index.ucjh5kku.js";var c={local:{},session:{}};function S(e){return e==="local"?localStorage:sessionStorage}function I(e,w,b){var d,f;const i=(d=void 0)!=null?d:JSON,t=(f=void 0)!=null?f:"local",p=typeof window<"u"&&typeof document<"u",r=p?S(t):null;function g(s,l){r==null||r.setItem(s,i.stringify(l))}if(!c[t][e]){const s=m(w,o=>{const a=r==null?void 0:r.getItem(e);if(a&&o(i.parse(a)),p&&t=="local"){const n=u=>{u.key===e&&o(u.newValue?i.parse(u.newValue):null)};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)}}),{subscribe:l,set:v}=s;c[t][e]={set(o){g(e,o),v(o)},update(o){return s.update(a=>{const n=o(a);return g(e,n),n})},subscribe:l}}return c[t][e]}export{I as p};
