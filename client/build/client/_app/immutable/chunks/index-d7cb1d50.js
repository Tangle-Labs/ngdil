import{w as v}from"./index-d7ecdb1d.js";import{O as b}from"./index-6e3ec9d0.js";var u={};function m(e){return e==="local"?localStorage:sessionStorage}function I(e,S,o){var f,g;const s=(f=o==null?void 0:o.serializer)!=null?f:JSON,c=(g=o==null?void 0:o.storage)!=null?g:"local",a=typeof window<"u"&&typeof document<"u";function d(n,i){!a||m(c).setItem(n,s.stringify(i))}if(!u[e]){const n=v(S,t=>{const r=a?m(c).getItem(e):null;if(r&&t(s.parse(r)),a){const p=l=>{l.key===e&&t(l.newValue?s.parse(l.newValue):null)};return window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)}}),{subscribe:i,set:w}=n;u[e]={set(t){d(e,t),w(t)},update(t){const r=t(b(n));d(e,r),w(r)},subscribe:i}}return u[e]}export{I as p};
