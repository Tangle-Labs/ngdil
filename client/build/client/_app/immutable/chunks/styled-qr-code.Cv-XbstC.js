function Ct(K,yt){for(var lt=0;lt<yt.length;lt++){const it=yt[lt];if(typeof it!="string"&&!Array.isArray(it)){for(const H in it)if(H!=="default"&&!(H in K)){const ut=Object.getOwnPropertyDescriptor(it,H);ut&&Object.defineProperty(K,H,ut.get?ut:{enumerable:!0,get:()=>it[H]})}}}return Object.freeze(Object.defineProperty(K,Symbol.toStringTag,{value:"Module"}))}function Dt(K){return K&&K.__esModule&&Object.prototype.hasOwnProperty.call(K,"default")?K.default:K}var St={exports:{}};(function(K,yt){(function(lt,it){K.exports=it()})(self,()=>(()=>{var lt={192:(N,T)=>{var G,gt,ft=function(){var V=function(f,p){var w=f,u=ht[p],l=null,_=0,y=null,m=[],x={},j=function(n,a){l=function(d){for(var h=new Array(d),c=0;c<d;c+=1){h[c]=new Array(d);for(var g=0;g<d;g+=1)h[c][g]=null}return h}(_=4*w+17),E(0,0),E(_-7,0),E(0,_-7),e(),M(),i(n,a),w>=7&&t(n),y==null&&(y=o(w,u,m)),r(y,a)},E=function(n,a){for(var d=-1;d<=7;d+=1)if(!(n+d<=-1||_<=n+d))for(var h=-1;h<=7;h+=1)a+h<=-1||_<=a+h||(l[n+d][a+h]=0<=d&&d<=6&&(h==0||h==6)||0<=h&&h<=6&&(d==0||d==6)||2<=d&&d<=4&&2<=h&&h<=4)},M=function(){for(var n=8;n<_-8;n+=1)l[n][6]==null&&(l[n][6]=n%2==0);for(var a=8;a<_-8;a+=1)l[6][a]==null&&(l[6][a]=a%2==0)},e=function(){for(var n=tt.getPatternPosition(w),a=0;a<n.length;a+=1)for(var d=0;d<n.length;d+=1){var h=n[a],c=n[d];if(l[h][c]==null)for(var g=-2;g<=2;g+=1)for(var v=-2;v<=2;v+=1)l[h+g][c+v]=g==-2||g==2||v==-2||v==2||g==0&&v==0}},t=function(n){for(var a=tt.getBCHTypeNumber(w),d=0;d<18;d+=1){var h=!n&&(a>>d&1)==1;l[Math.floor(d/3)][d%3+_-8-3]=h}for(d=0;d<18;d+=1)h=!n&&(a>>d&1)==1,l[d%3+_-8-3][Math.floor(d/3)]=h},i=function(n,a){for(var d=u<<3|a,h=tt.getBCHTypeInfo(d),c=0;c<15;c+=1){var g=!n&&(h>>c&1)==1;c<6?l[c][8]=g:c<8?l[c+1][8]=g:l[_-15+c][8]=g}for(c=0;c<15;c+=1)g=!n&&(h>>c&1)==1,c<8?l[8][_-c-1]=g:c<9?l[8][15-c-1+1]=g:l[8][15-c-1]=g;l[_-8][8]=!n},r=function(n,a){for(var d=-1,h=_-1,c=7,g=0,v=tt.getMaskFunction(a),b=_-1;b>0;b-=2)for(b==6&&(b-=1);;){for(var S=0;S<2;S+=1)if(l[h][b-S]==null){var O=!1;g<n.length&&(O=(n[g]>>>c&1)==1),v(h,b-S)&&(O=!O),l[h][b-S]=O,(c-=1)==-1&&(g+=1,c=7)}if((h+=d)<0||_<=h){h-=d,d=-d;break}}},o=function(n,a,d){for(var h=_t.getRSBlocks(n,a),c=pt(),g=0;g<d.length;g+=1){var v=d[g];c.put(v.getMode(),4),c.put(v.getLength(),tt.getLengthInBits(v.getMode(),n)),v.write(c)}var b=0;for(g=0;g<h.length;g+=1)b+=h[g].dataCount;if(c.getLengthInBits()>8*b)throw"code length overflow. ("+c.getLengthInBits()+">"+8*b+")";for(c.getLengthInBits()+4<=8*b&&c.put(0,4);c.getLengthInBits()%8!=0;)c.putBit(!1);for(;!(c.getLengthInBits()>=8*b||(c.put(236,8),c.getLengthInBits()>=8*b));)c.put(17,8);return function(S,O){for(var C=0,L=0,B=0,q=new Array(O.length),$=new Array(O.length),D=0;D<O.length;D+=1){var X=O[D].dataCount,U=O[D].totalCount-X;L=Math.max(L,X),B=Math.max(B,U),q[D]=new Array(X);for(var z=0;z<q[D].length;z+=1)q[D][z]=255&S.getBuffer()[z+C];C+=X;var R=tt.getErrorCorrectPolynomial(U),A=ct(q[D],R.getLength()-1).mod(R);for($[D]=new Array(R.getLength()-1),z=0;z<$[D].length;z+=1){var I=z+A.getLength()-$[D].length;$[D][z]=I>=0?A.getAt(I):0}}var F=0;for(z=0;z<O.length;z+=1)F+=O[z].totalCount;var Q=new Array(F),P=0;for(z=0;z<L;z+=1)for(D=0;D<O.length;D+=1)z<q[D].length&&(Q[P]=q[D][z],P+=1);for(z=0;z<B;z+=1)for(D=0;D<O.length;D+=1)z<$[D].length&&(Q[P]=$[D][z],P+=1);return Q}(c,h)};x.addData=function(n,a){var d=null;switch(a=a||"Byte"){case"Numeric":d=nt(n);break;case"Alphanumeric":d=st(n);break;case"Byte":d=vt(n);break;case"Kanji":d=wt(n);break;default:throw"mode:"+a}m.push(d),y=null},x.isDark=function(n,a){if(n<0||_<=n||a<0||_<=a)throw n+","+a;return l[n][a]},x.getModuleCount=function(){return _},x.make=function(){if(w<1){for(var n=1;n<40;n++){for(var a=_t.getRSBlocks(n,u),d=pt(),h=0;h<m.length;h++){var c=m[h];d.put(c.getMode(),4),d.put(c.getLength(),tt.getLengthInBits(c.getMode(),n)),c.write(d)}var g=0;for(h=0;h<a.length;h++)g+=a[h].dataCount;if(d.getLengthInBits()<=8*g)break}w=n}j(!1,function(){for(var v=0,b=0,S=0;S<8;S+=1){j(!0,S);var O=tt.getLostPoint(x);(S==0||v>O)&&(v=O,b=S)}return b}())},x.createTableTag=function(n,a){n=n||2;var d="";d+='<table style="',d+=" border-width: 0px; border-style: none;",d+=" border-collapse: collapse;",d+=" padding: 0px; margin: "+(a=a===void 0?4*n:a)+"px;",d+='">',d+="<tbody>";for(var h=0;h<x.getModuleCount();h+=1){d+="<tr>";for(var c=0;c<x.getModuleCount();c+=1)d+='<td style="',d+=" border-width: 0px; border-style: none;",d+=" border-collapse: collapse;",d+=" padding: 0px; margin: 0px;",d+=" width: "+n+"px;",d+=" height: "+n+"px;",d+=" background-color: ",d+=x.isDark(h,c)?"#000000":"#ffffff",d+=";",d+='"/>';d+="</tr>"}return(d+="</tbody>")+"</table>"},x.createSvgTag=function(n,a,d,h){var c={};typeof arguments[0]=="object"&&(n=(c=arguments[0]).cellSize,a=c.margin,d=c.alt,h=c.title),n=n||2,a=a===void 0?4*n:a,(d=typeof d=="string"?{text:d}:d||{}).text=d.text||null,d.id=d.text?d.id||"qrcode-description":null,(h=typeof h=="string"?{text:h}:h||{}).text=h.text||null,h.id=h.text?h.id||"qrcode-title":null;var g,v,b,S,O=x.getModuleCount()*n+2*a,C="";for(S="l"+n+",0 0,"+n+" -"+n+",0 0,-"+n+"z ",C+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',C+=c.scalable?"":' width="'+O+'px" height="'+O+'px"',C+=' viewBox="0 0 '+O+" "+O+'" ',C+=' preserveAspectRatio="xMinYMin meet"',C+=h.text||d.text?' role="img" aria-labelledby="'+s([h.id,d.id].join(" ").trim())+'"':"",C+=">",C+=h.text?'<title id="'+s(h.id)+'">'+s(h.text)+"</title>":"",C+=d.text?'<description id="'+s(d.id)+'">'+s(d.text)+"</description>":"",C+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',C+='<path d="',v=0;v<x.getModuleCount();v+=1)for(b=v*n+a,g=0;g<x.getModuleCount();g+=1)x.isDark(v,g)&&(C+="M"+(g*n+a)+","+b+S);return(C+='" stroke="transparent" fill="black"/>')+"</svg>"},x.createDataURL=function(n,a){n=n||2,a=a===void 0?4*n:a;var d=x.getModuleCount()*n+2*a,h=a,c=d-a;return at(d,d,function(g,v){if(h<=g&&g<c&&h<=v&&v<c){var b=Math.floor((g-h)/n),S=Math.floor((v-h)/n);return x.isDark(S,b)?0:1}return 1})},x.createImgTag=function(n,a,d){n=n||2,a=a===void 0?4*n:a;var h=x.getModuleCount()*n+2*a,c="";return c+="<img",c+=' src="',c+=x.createDataURL(n,a),c+='"',c+=' width="',c+=h,c+='"',c+=' height="',c+=h,c+='"',d&&(c+=' alt="',c+=s(d),c+='"'),c+"/>"};var s=function(n){for(var a="",d=0;d<n.length;d+=1){var h=n.charAt(d);switch(h){case"<":a+="&lt;";break;case">":a+="&gt;";break;case"&":a+="&amp;";break;case'"':a+="&quot;";break;default:a+=h}}return a};return x.createASCII=function(n,a){if((n=n||1)<2)return function(q){q=q===void 0?2:q;var $,D,X,U,z,R=1*x.getModuleCount()+2*q,A=q,I=R-q,F={"██":"█","█ ":"▀"," █":"▄","  ":" "},Q={"██":"▀","█ ":"▀"," █":" ","  ":" "},P="";for($=0;$<R;$+=2){for(X=Math.floor(($-A)/1),U=Math.floor(($+1-A)/1),D=0;D<R;D+=1)z="█",A<=D&&D<I&&A<=$&&$<I&&x.isDark(X,Math.floor((D-A)/1))&&(z=" "),A<=D&&D<I&&A<=$+1&&$+1<I&&x.isDark(U,Math.floor((D-A)/1))?z+=" ":z+="█",P+=q<1&&$+1>=I?Q[z]:F[z];P+=`
`}return R%2&&q>0?P.substring(0,P.length-R-1)+Array(R+1).join("▀"):P.substring(0,P.length-1)}(a);n-=1,a=a===void 0?2*n:a;var d,h,c,g,v=x.getModuleCount()*n+2*a,b=a,S=v-a,O=Array(n+1).join("██"),C=Array(n+1).join("  "),L="",B="";for(d=0;d<v;d+=1){for(c=Math.floor((d-b)/n),B="",h=0;h<v;h+=1)g=1,b<=h&&h<S&&b<=d&&d<S&&x.isDark(c,Math.floor((h-b)/n))&&(g=0),B+=g?O:C;for(c=0;c<n;c+=1)L+=B+`
`}return L.substring(0,L.length-1)},x.renderTo2dContext=function(n,a){a=a||2;for(var d=x.getModuleCount(),h=0;h<d;h++)for(var c=0;c<d;c++)n.fillStyle=x.isDark(h,c)?"black":"white",n.fillRect(h*a,c*a,a,a)},x};V.stringToBytes=(V.stringToBytesFuncs={default:function(f){for(var p=[],w=0;w<f.length;w+=1){var u=f.charCodeAt(w);p.push(255&u)}return p}}).default,V.createStringToBytes=function(f,p){var w=function(){for(var l=bt(f),_=function(){var M=l.read();if(M==-1)throw"eof";return M},y=0,m={};;){var x=l.read();if(x==-1)break;var j=_(),E=_()<<8|_();m[String.fromCharCode(x<<8|j)]=E,y+=1}if(y!=p)throw y+" != "+p;return m}(),u=63;return function(l){for(var _=[],y=0;y<l.length;y+=1){var m=l.charCodeAt(y);if(m<128)_.push(m);else{var x=w[l.charAt(y)];typeof x=="number"?(255&x)==x?_.push(x):(_.push(x>>>8),_.push(255&x)):_.push(u)}}return _}};var ot,Y,W,k,Z,ht={L:1,M:0,Q:3,H:2},tt=(ot=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],Y=1335,W=7973,Z=function(f){for(var p=0;f!=0;)p+=1,f>>>=1;return p},(k={}).getBCHTypeInfo=function(f){for(var p=f<<10;Z(p)-Z(Y)>=0;)p^=Y<<Z(p)-Z(Y);return 21522^(f<<10|p)},k.getBCHTypeNumber=function(f){for(var p=f<<12;Z(p)-Z(W)>=0;)p^=W<<Z(p)-Z(W);return f<<12|p},k.getPatternPosition=function(f){return ot[f-1]},k.getMaskFunction=function(f){switch(f){case 0:return function(p,w){return(p+w)%2==0};case 1:return function(p,w){return p%2==0};case 2:return function(p,w){return w%3==0};case 3:return function(p,w){return(p+w)%3==0};case 4:return function(p,w){return(Math.floor(p/2)+Math.floor(w/3))%2==0};case 5:return function(p,w){return p*w%2+p*w%3==0};case 6:return function(p,w){return(p*w%2+p*w%3)%2==0};case 7:return function(p,w){return(p*w%3+(p+w)%2)%2==0};default:throw"bad maskPattern:"+f}},k.getErrorCorrectPolynomial=function(f){for(var p=ct([1],0),w=0;w<f;w+=1)p=p.multiply(ct([1,rt.gexp(w)],0));return p},k.getLengthInBits=function(f,p){if(1<=p&&p<10)switch(f){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+f}else if(p<27)switch(f){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+f}else{if(!(p<41))throw"type:"+p;switch(f){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+f}}},k.getLostPoint=function(f){for(var p=f.getModuleCount(),w=0,u=0;u<p;u+=1)for(var l=0;l<p;l+=1){for(var _=0,y=f.isDark(u,l),m=-1;m<=1;m+=1)if(!(u+m<0||p<=u+m))for(var x=-1;x<=1;x+=1)l+x<0||p<=l+x||m==0&&x==0||y==f.isDark(u+m,l+x)&&(_+=1);_>5&&(w+=3+_-5)}for(u=0;u<p-1;u+=1)for(l=0;l<p-1;l+=1){var j=0;f.isDark(u,l)&&(j+=1),f.isDark(u+1,l)&&(j+=1),f.isDark(u,l+1)&&(j+=1),f.isDark(u+1,l+1)&&(j+=1),j!=0&&j!=4||(w+=3)}for(u=0;u<p;u+=1)for(l=0;l<p-6;l+=1)f.isDark(u,l)&&!f.isDark(u,l+1)&&f.isDark(u,l+2)&&f.isDark(u,l+3)&&f.isDark(u,l+4)&&!f.isDark(u,l+5)&&f.isDark(u,l+6)&&(w+=40);for(l=0;l<p;l+=1)for(u=0;u<p-6;u+=1)f.isDark(u,l)&&!f.isDark(u+1,l)&&f.isDark(u+2,l)&&f.isDark(u+3,l)&&f.isDark(u+4,l)&&!f.isDark(u+5,l)&&f.isDark(u+6,l)&&(w+=40);var E=0;for(l=0;l<p;l+=1)for(u=0;u<p;u+=1)f.isDark(u,l)&&(E+=1);return w+Math.abs(100*E/p/p-50)/5*10},k),rt=function(){for(var f=new Array(256),p=new Array(256),w=0;w<8;w+=1)f[w]=1<<w;for(w=8;w<256;w+=1)f[w]=f[w-4]^f[w-5]^f[w-6]^f[w-8];for(w=0;w<255;w+=1)p[f[w]]=w;return{glog:function(u){if(u<1)throw"glog("+u+")";return p[u]},gexp:function(u){for(;u<0;)u+=255;for(;u>=256;)u-=255;return f[u]}}}();function ct(f,p){if(f.length===void 0)throw f.length+"/"+p;var w=function(){for(var l=0;l<f.length&&f[l]==0;)l+=1;for(var _=new Array(f.length-l+p),y=0;y<f.length-l;y+=1)_[y]=f[y+l];return _}(),u={getAt:function(l){return w[l]},getLength:function(){return w.length},multiply:function(l){for(var _=new Array(u.getLength()+l.getLength()-1),y=0;y<u.getLength();y+=1)for(var m=0;m<l.getLength();m+=1)_[y+m]^=rt.gexp(rt.glog(u.getAt(y))+rt.glog(l.getAt(m)));return ct(_,0)},mod:function(l){if(u.getLength()-l.getLength()<0)return u;for(var _=rt.glog(u.getAt(0))-rt.glog(l.getAt(0)),y=new Array(u.getLength()),m=0;m<u.getLength();m+=1)y[m]=u.getAt(m);for(m=0;m<l.getLength();m+=1)y[m]^=rt.gexp(rt.glog(l.getAt(m))+_);return ct(y,0).mod(l)}};return u}var _t=function(){var f=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],p=function(u,l){var _={};return _.totalCount=u,_.dataCount=l,_},w={getRSBlocks:function(u,l){var _=function(t,i){switch(i){case ht.L:return f[4*(t-1)+0];case ht.M:return f[4*(t-1)+1];case ht.Q:return f[4*(t-1)+2];case ht.H:return f[4*(t-1)+3];default:return}}(u,l);if(_===void 0)throw"bad rs block @ typeNumber:"+u+"/errorCorrectionLevel:"+l;for(var y=_.length/3,m=[],x=0;x<y;x+=1)for(var j=_[3*x+0],E=_[3*x+1],M=_[3*x+2],e=0;e<j;e+=1)m.push(p(E,M));return m}};return w}(),pt=function(){var f=[],p=0,w={getBuffer:function(){return f},getAt:function(u){var l=Math.floor(u/8);return(f[l]>>>7-u%8&1)==1},put:function(u,l){for(var _=0;_<l;_+=1)w.putBit((u>>>l-_-1&1)==1)},getLengthInBits:function(){return p},putBit:function(u){var l=Math.floor(p/8);f.length<=l&&f.push(0),u&&(f[l]|=128>>>p%8),p+=1}};return w},nt=function(f){var p=f,w={getMode:function(){return 1},getLength:function(_){return p.length},write:function(_){for(var y=p,m=0;m+2<y.length;)_.put(u(y.substring(m,m+3)),10),m+=3;m<y.length&&(y.length-m==1?_.put(u(y.substring(m,m+1)),4):y.length-m==2&&_.put(u(y.substring(m,m+2)),7))}},u=function(_){for(var y=0,m=0;m<_.length;m+=1)y=10*y+l(_.charAt(m));return y},l=function(_){if("0"<=_&&_<="9")return _.charCodeAt(0)-48;throw"illegal char :"+_};return w},st=function(f){var p=f,w={getMode:function(){return 2},getLength:function(l){return p.length},write:function(l){for(var _=p,y=0;y+1<_.length;)l.put(45*u(_.charAt(y))+u(_.charAt(y+1)),11),y+=2;y<_.length&&l.put(u(_.charAt(y)),6)}},u=function(l){if("0"<=l&&l<="9")return l.charCodeAt(0)-48;if("A"<=l&&l<="Z")return l.charCodeAt(0)-65+10;switch(l){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+l}};return w},vt=function(f){var p=V.stringToBytes(f);return{getMode:function(){return 4},getLength:function(w){return p.length},write:function(w){for(var u=0;u<p.length;u+=1)w.put(p[u],8)}}},wt=function(f){var p=V.stringToBytesFuncs.SJIS;if(!p)throw"sjis not supported.";(function(l,_){var y=p("友");if(y.length!=2||(y[0]<<8|y[1])!=38726)throw"sjis not supported."})();var w=p(f),u={getMode:function(){return 8},getLength:function(l){return~~(w.length/2)},write:function(l){for(var _=w,y=0;y+1<_.length;){var m=(255&_[y])<<8|255&_[y+1];if(33088<=m&&m<=40956)m-=33088;else{if(!(57408<=m&&m<=60351))throw"illegal char at "+(y+1)+"/"+m;m-=49472}m=192*(m>>>8&255)+(255&m),l.put(m,13),y+=2}if(y<_.length)throw"illegal char at "+(y+1)}};return u},mt=function(){var f=[],p={writeByte:function(w){f.push(255&w)},writeShort:function(w){p.writeByte(w),p.writeByte(w>>>8)},writeBytes:function(w,u,l){u=u||0,l=l||w.length;for(var _=0;_<l;_+=1)p.writeByte(w[_+u])},writeString:function(w){for(var u=0;u<w.length;u+=1)p.writeByte(w.charCodeAt(u))},toByteArray:function(){return f},toString:function(){var w="";w+="[";for(var u=0;u<f.length;u+=1)u>0&&(w+=","),w+=f[u];return w+"]"}};return p},bt=function(f){var p=f,w=0,u=0,l=0,_={read:function(){for(;l<8;){if(w>=p.length){if(l==0)return-1;throw"unexpected end of file./"+l}var m=p.charAt(w);if(w+=1,m=="=")return l=0,-1;m.match(/^\s$/)||(u=u<<6|y(m.charCodeAt(0)),l+=6)}var x=u>>>l-8&255;return l-=8,x}},y=function(m){if(65<=m&&m<=90)return m-65;if(97<=m&&m<=122)return m-97+26;if(48<=m&&m<=57)return m-48+52;if(m==43)return 62;if(m==47)return 63;throw"c:"+m};return _},at=function(f,p,w){for(var u=function(E,M){var e=E,t=M,i=new Array(E*M),r={setPixel:function(n,a,d){i[a*e+n]=d},write:function(n){n.writeString("GIF87a"),n.writeShort(e),n.writeShort(t),n.writeByte(128),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(255),n.writeByte(255),n.writeByte(255),n.writeString(","),n.writeShort(0),n.writeShort(0),n.writeShort(e),n.writeShort(t),n.writeByte(0);var a=o(2);n.writeByte(2);for(var d=0;a.length-d>255;)n.writeByte(255),n.writeBytes(a,d,255),d+=255;n.writeByte(a.length-d),n.writeBytes(a,d,a.length-d),n.writeByte(0),n.writeString(";")}},o=function(n){for(var a=1<<n,d=1+(1<<n),h=n+1,c=s(),g=0;g<a;g+=1)c.add(String.fromCharCode(g));c.add(String.fromCharCode(a)),c.add(String.fromCharCode(d));var v,b,S,O=mt(),C=(v=O,b=0,S=0,{write:function($,D){if($>>>D)throw"length over";for(;b+D>=8;)v.writeByte(255&($<<b|S)),D-=8-b,$>>>=8-b,S=0,b=0;S|=$<<b,b+=D},flush:function(){b>0&&v.writeByte(S)}});C.write(a,h);var L=0,B=String.fromCharCode(i[L]);for(L+=1;L<i.length;){var q=String.fromCharCode(i[L]);L+=1,c.contains(B+q)?B+=q:(C.write(c.indexOf(B),h),c.size()<4095&&(c.size()==1<<h&&(h+=1),c.add(B+q)),B=q)}return C.write(c.indexOf(B),h),C.write(d,h),C.flush(),O.toByteArray()},s=function(){var n={},a=0,d={add:function(h){if(d.contains(h))throw"dup key:"+h;n[h]=a,a+=1},size:function(){return a},indexOf:function(h){return n[h]},contains:function(h){return n[h]!==void 0}};return d};return r}(f,p),l=0;l<p;l+=1)for(var _=0;_<f;_+=1)u.setPixel(_,l,w(_,l));var y=mt();u.write(y);for(var m=function(){var E=0,M=0,e=0,t="",i={},r=function(s){t+=String.fromCharCode(o(63&s))},o=function(s){if(!(s<0)){if(s<26)return 65+s;if(s<52)return s-26+97;if(s<62)return s-52+48;if(s==62)return 43;if(s==63)return 47}throw"n:"+s};return i.writeByte=function(s){for(E=E<<8|255&s,M+=8,e+=1;M>=6;)r(E>>>M-6),M-=6},i.flush=function(){if(M>0&&(r(E<<6-M),E=0,M=0),e%3!=0)for(var s=3-e%3,n=0;n<s;n+=1)t+="="},i.toString=function(){return t},i}(),x=y.toByteArray(),j=0;j<x.length;j+=1)m.writeByte(x[j]);return m.flush(),"data:image/gif;base64,"+m};return V}();ft.stringToBytesFuncs["UTF-8"]=function(V){return function(ot){for(var Y=[],W=0;W<ot.length;W++){var k=ot.charCodeAt(W);k<128?Y.push(k):k<2048?Y.push(192|k>>6,128|63&k):k<55296||k>=57344?Y.push(224|k>>12,128|k>>6&63,128|63&k):(W++,k=65536+((1023&k)<<10|1023&ot.charCodeAt(W)),Y.push(240|k>>18,128|k>>12&63,128|k>>6&63,128|63&k))}return Y}(V)},(gt=typeof(G=function(){return ft})=="function"?G.apply(T,[]):G)===void 0||(N.exports=gt)}},it={};function H(N){var T=it[N];if(T!==void 0)return T.exports;var G=it[N]={exports:{}};return lt[N](G,G.exports,H),G.exports}H.n=N=>{var T=N&&N.__esModule?()=>N.default:()=>N;return H.d(T,{a:T}),T},H.d=(N,T)=>{for(var G in T)H.o(T,G)&&!H.o(N,G)&&Object.defineProperty(N,G,{enumerable:!0,get:T[G]})},H.o=(N,T)=>Object.prototype.hasOwnProperty.call(N,T);var ut={};return(()=>{H.d(ut,{default:()=>E});const N=M=>!!M&&typeof M=="object"&&!Array.isArray(M);function T(M,...e){if(!e.length)return M;const t=e.shift();return t!==void 0&&N(M)&&N(t)?(M=Object.assign({},M),Object.keys(t).forEach(i=>{const r=M[i],o=t[i];Array.isArray(r)&&Array.isArray(o)?M[i]=o:N(r)&&N(o)?M[i]=T(Object.assign({},r),o):M[i]=o}),T(M,...e)):M}function G(M,e){const t=document.createElement("a");t.download=e,t.href=M,document.body.appendChild(t),t.click(),document.body.removeChild(t)}function gt({originalHeight:M,originalWidth:e,maxHiddenDots:t,maxHiddenAxisDots:i,dotSize:r}){const o={x:0,y:0},s={x:0,y:0};if(M<=0||e<=0||t<=0||r<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const n=M/e;return o.x=Math.floor(Math.sqrt(t/n)),o.x<=0&&(o.x=1),i&&i<o.x&&(o.x=i),o.x%2==0&&o.x--,s.x=o.x*r,o.y=1+2*Math.ceil((o.x*n-1)/2),s.y=Math.round(s.x*n),(o.y*o.x>t||i&&i<o.y)&&(i&&i<o.y?(o.y=i,o.y%2==0&&o.x--):o.y-=2,s.y=o.y*r,o.x=1+2*Math.ceil((o.y/n-1)/2),s.x=Math.round(s.y/n)),{height:s.y,width:s.x,hideYDots:o.x,hideXDots:o.y}}const ft={L:.07,M:.15,Q:.25,H:.3},V="dots",ot="rounded",Y="classy",W="classy-rounded",k="extra-rounded";class Z{constructor({context:e,type:t}){this._context=e,this._type=t}draw(e,t,i,r){const o=this._context;let s;switch(this._type){case V:s=this._drawDot;break;case Y:s=this._drawClassy;break;case W:s=this._drawClassyRounded;break;case ot:s=this._drawRounded;break;case k:s=this._drawExtraRounded;break;default:s=this._drawSquare}s.call(this,{x:e,y:t,size:i,context:o,getNeighbor:r})}_rotateFigure({x:e,y:t,size:i,context:r,rotation:o=0,draw:s}){const n=e+i/2,a=t+i/2;r.translate(n,a),o&&r.rotate(o),s(),r.closePath(),o&&r.rotate(-o),r.translate(-n,-a)}_basicDot(e){const{size:t,context:i}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{i.arc(0,0,t/2,0,2*Math.PI)}}))}_basicSquare(e){const{size:t,context:i}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{i.rect(-t/2,-t/2,t,t)}}))}_basicSideRounded(e){const{size:t,context:i}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{i.arc(0,0,t/2,-Math.PI/2,Math.PI/2),i.lineTo(-t/2,t/2),i.lineTo(-t/2,-t/2),i.lineTo(0,-t/2)}}))}_basicCornerRounded(e){const{size:t,context:i}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{i.arc(0,0,t/2,-Math.PI/2,0),i.lineTo(t/2,t/2),i.lineTo(-t/2,t/2),i.lineTo(-t/2,-t/2),i.lineTo(0,-t/2)}}))}_basicCornerExtraRounded(e){const{size:t,context:i}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{i.arc(-t/2,t/2,t,-Math.PI/2,0),i.lineTo(-t/2,t/2),i.lineTo(-t/2,-t/2)}}))}_basicCornersRounded(e){const{size:t,context:i}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{i.arc(0,0,t/2,-Math.PI/2,0),i.lineTo(t/2,t/2),i.lineTo(0,t/2),i.arc(0,0,t/2,Math.PI/2,Math.PI),i.lineTo(-t/2,-t/2),i.lineTo(0,-t/2)}}))}_basicCornersExtraRounded(e){const{size:t,context:i}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{i.arc(-t/2,t/2,t,-Math.PI/2,0),i.arc(t/2,-t/2,t,Math.PI/2,Math.PI)}}))}_drawDot({x:e,y:t,size:i,context:r}){this._basicDot({x:e,y:t,size:i,context:r,rotation:0})}_drawSquare({x:e,y:t,size:i,context:r}){this._basicSquare({x:e,y:t,size:i,context:r,rotation:0})}_drawRounded({x:e,y:t,size:i,context:r,getNeighbor:o}){const s=o?+o(-1,0):0,n=o?+o(1,0):0,a=o?+o(0,-1):0,d=o?+o(0,1):0,h=s+n+a+d;if(h!==0)if(h>2||s&&n||a&&d)this._basicSquare({x:e,y:t,size:i,context:r,rotation:0});else{if(h===2){let c=0;return s&&a?c=Math.PI/2:a&&n?c=Math.PI:n&&d&&(c=-Math.PI/2),void this._basicCornerRounded({x:e,y:t,size:i,context:r,rotation:c})}if(h===1){let c=0;return a?c=Math.PI/2:n?c=Math.PI:d&&(c=-Math.PI/2),void this._basicSideRounded({x:e,y:t,size:i,context:r,rotation:c})}}else this._basicDot({x:e,y:t,size:i,context:r,rotation:0})}_drawExtraRounded({x:e,y:t,size:i,context:r,getNeighbor:o}){const s=o?+o(-1,0):0,n=o?+o(1,0):0,a=o?+o(0,-1):0,d=o?+o(0,1):0,h=s+n+a+d;if(h!==0)if(h>2||s&&n||a&&d)this._basicSquare({x:e,y:t,size:i,context:r,rotation:0});else{if(h===2){let c=0;return s&&a?c=Math.PI/2:a&&n?c=Math.PI:n&&d&&(c=-Math.PI/2),void this._basicCornerExtraRounded({x:e,y:t,size:i,context:r,rotation:c})}if(h===1){let c=0;return a?c=Math.PI/2:n?c=Math.PI:d&&(c=-Math.PI/2),void this._basicSideRounded({x:e,y:t,size:i,context:r,rotation:c})}}else this._basicDot({x:e,y:t,size:i,context:r,rotation:0})}_drawClassy({x:e,y:t,size:i,context:r,getNeighbor:o}){const s=o?+o(-1,0):0,n=o?+o(1,0):0,a=o?+o(0,-1):0,d=o?+o(0,1):0;s+n+a+d!==0?s||a?n||d?this._basicSquare({x:e,y:t,size:i,context:r,rotation:0}):this._basicCornerRounded({x:e,y:t,size:i,context:r,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:t,size:i,context:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:t,size:i,context:r,rotation:Math.PI/2})}_drawClassyRounded({x:e,y:t,size:i,context:r,getNeighbor:o}){const s=o?+o(-1,0):0,n=o?+o(1,0):0,a=o?+o(0,-1):0,d=o?+o(0,1):0;s+n+a+d!==0?s||a?n||d?this._basicSquare({x:e,y:t,size:i,context:r,rotation:0}):this._basicCornerExtraRounded({x:e,y:t,size:i,context:r,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:t,size:i,context:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:t,size:i,context:r,rotation:Math.PI/2})}}const ht="square",tt="extra-rounded";class rt{constructor({context:e,type:t}){this._context=e,this._type=t}draw(e,t,i,r){const o=this._context;let s;switch(this._type){case ht:s=this._drawSquare;break;case tt:s=this._drawExtraRounded;break;default:s=this._drawDot}s.call(this,{x:e,y:t,size:i,context:o,rotation:r})}_rotateFigure({x:e,y:t,size:i,context:r,rotation:o=0,draw:s}){const n=e+i/2,a=t+i/2;r.translate(n,a),o&&r.rotate(o),s(),r.closePath(),o&&r.rotate(-o),r.translate(-n,-a)}_basicDot(e){const{size:t,context:i}=e,r=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{i.arc(0,0,t/2,0,2*Math.PI),i.arc(0,0,t/2-r,0,2*Math.PI)}}))}_basicSquare(e){const{size:t,context:i}=e,r=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{i.rect(-t/2,-t/2,t,t),i.rect(-t/2+r,-t/2+r,t-2*r,t-2*r)}}))}_basicExtraRounded(e){const{size:t,context:i}=e,r=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{i.arc(-r,-r,2.5*r,Math.PI,-Math.PI/2),i.lineTo(r,-3.5*r),i.arc(r,-r,2.5*r,-Math.PI/2,0),i.lineTo(3.5*r,-r),i.arc(r,r,2.5*r,0,Math.PI/2),i.lineTo(-r,3.5*r),i.arc(-r,r,2.5*r,Math.PI/2,Math.PI),i.lineTo(-3.5*r,-r),i.arc(-r,-r,1.5*r,Math.PI,-Math.PI/2),i.lineTo(r,-2.5*r),i.arc(r,-r,1.5*r,-Math.PI/2,0),i.lineTo(2.5*r,-r),i.arc(r,r,1.5*r,0,Math.PI/2),i.lineTo(-r,2.5*r),i.arc(-r,r,1.5*r,Math.PI/2,Math.PI),i.lineTo(-2.5*r,-r)}}))}_drawDot({x:e,y:t,size:i,context:r,rotation:o}){this._basicDot({x:e,y:t,size:i,context:r,rotation:o})}_drawSquare({x:e,y:t,size:i,context:r,rotation:o}){this._basicSquare({x:e,y:t,size:i,context:r,rotation:o})}_drawExtraRounded({x:e,y:t,size:i,context:r,rotation:o}){this._basicExtraRounded({x:e,y:t,size:i,context:r,rotation:o})}}const ct="square";class _t{constructor({context:e,type:t}){this._context=e,this._type=t}draw(e,t,i,r){const o=this._context;let s;s=this._type===ct?this._drawSquare:this._drawDot,s.call(this,{x:e,y:t,size:i,context:o,rotation:r})}_rotateFigure({x:e,y:t,size:i,context:r,rotation:o=0,draw:s}){const n=e+i/2,a=t+i/2;r.translate(n,a),o&&r.rotate(o),s(),r.closePath(),o&&r.rotate(-o),r.translate(-n,-a)}_basicDot(e){const{size:t,context:i}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{i.arc(0,0,t/2,0,2*Math.PI)}}))}_basicSquare(e){const{size:t,context:i}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{i.rect(-t/2,-t/2,t,t)}}))}_drawDot({x:e,y:t,size:i,context:r,rotation:o}){this._basicDot({x:e,y:t,size:i,context:r,rotation:o})}_drawSquare({x:e,y:t,size:i,context:r,rotation:o}){this._basicSquare({x:e,y:t,size:i,context:r,rotation:o})}}const pt="radial",nt=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],st=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class vt{constructor(e){this._canvas=document.createElement("canvas"),this._canvas.width=e.width,this._canvas.height=e.height,this._options=e}get context(){return this._canvas.getContext("2d")}get width(){return this._canvas.width}get height(){return this._canvas.height}getCanvas(){return this._canvas}clear(){const e=this.context;e&&e.clearRect(0,0,this._canvas.width,this._canvas.height)}async drawQR(e){const t=e.getModuleCount(),i=Math.min(this._options.width,this._options.height)-2*this._options.margin,r=Math.floor(i/t);let o={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=e,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:s,qrOptions:n}=this._options,a=s.imageSize*ft[n.errorCorrectionLevel],d=Math.floor(a*t*t);o=gt({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:d,maxHiddenAxisDots:t-14,dotSize:r})}this.clear(),this.drawBackground(),this.drawDots((s,n)=>{var a,d,h,c,g,v;return!(this._options.imageOptions.hideBackgroundDots&&s>=(t-o.hideXDots)/2&&s<(t+o.hideXDots)/2&&n>=(t-o.hideYDots)/2&&n<(t+o.hideYDots)/2||!((a=nt[s])===null||a===void 0)&&a[n]||!((d=nt[s-t+7])===null||d===void 0)&&d[n]||!((h=nt[s])===null||h===void 0)&&h[n-t+7]||!((c=st[s])===null||c===void 0)&&c[n]||!((g=st[s-t+7])===null||g===void 0)&&g[n]||!((v=st[s])===null||v===void 0)&&v[n-t+7])}),this.drawCorners(),this._options.image&&this.drawImage({width:o.width,height:o.height,count:t,dotSize:r})}drawBackground(){const e=this.context,t=this._options;if(e){if(t.backgroundOptions.gradient){const i=t.backgroundOptions.gradient,r=this._createGradient({context:e,options:i,additionalRotation:0,x:0,y:0,size:this._canvas.width>this._canvas.height?this._canvas.width:this._canvas.height});i.colorStops.forEach(({offset:o,color:s})=>{r.addColorStop(o,s)}),e.fillStyle=r}else t.backgroundOptions.color&&(e.fillStyle=t.backgroundOptions.color);e.fillRect(0,0,this._canvas.width,this._canvas.height)}}drawDots(e){if(!this._qr)throw"QR code is not defined";const t=this.context;if(!t)throw"QR code is not defined";const i=this._options,r=this._qr.getModuleCount();if(r>i.width||r>i.height)throw"The canvas is too small.";const o=Math.min(i.width,i.height)-2*i.margin,s=Math.floor(o/r),n=Math.floor((i.width-r*s)/2),a=Math.floor((i.height-r*s)/2),d=new Z({context:t,type:i.dotsOptions.type});t.beginPath();for(let h=0;h<r;h++)for(let c=0;c<r;c++){if(e&&!e(h,c)||!this._qr.isDark(h,c))continue;const g=this._options.useLegacyDotRotation?n+h*s:a+c*s,v=this._options.useLegacyDotRotation?a+c*s:n+h*s;d.draw(g,v,s,(b,S)=>this._options.useLegacyDotRotation?!(h+b<0||c+S<0||h+b>=r||c+S>=r)&&!(e&&!e(h+b,c+S))&&!!this._qr&&this._qr.isDark(h+b,c+S):!(c+b<0||h+S<0||c+b>=r||h+S>=r)&&!(e&&!e(c+b,h+S))&&!!this._qr&&this._qr.isDark(h+S,c+b))}if(i.dotsOptions.gradient){const h=i.dotsOptions.gradient,c=this._createGradient({context:t,options:h,additionalRotation:0,x:n,y:a,size:r*s});h.colorStops.forEach(({offset:g,color:v})=>{c.addColorStop(g,v)}),t.fillStyle=t.strokeStyle=c}else i.dotsOptions.color&&(t.fillStyle=t.strokeStyle=i.dotsOptions.color);t.fill("evenodd")}drawCorners(e){if(!this._qr)throw"QR code is not defined";const t=this.context;if(!t)throw"QR code is not defined";const i=this._options,r=this._qr.getModuleCount(),o=Math.min(i.width,i.height)-2*i.margin,s=Math.floor(o/r),n=7*s,a=3*s,d=Math.floor((i.width-r*s)/2),h=Math.floor((i.height-r*s)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([c,g,v])=>{var b,S,O,C,L,B,q,$,D,X;if(e&&!e(c,g))return;const U=d+c*s*(r-7),z=h+g*s*(r-7);if(!((b=i.cornersSquareOptions)===null||b===void 0)&&b.type){const R=new rt({context:t,type:(S=i.cornersSquareOptions)===null||S===void 0?void 0:S.type});t.beginPath(),R.draw(U,z,n,v)}else{const R=new Z({context:t,type:i.dotsOptions.type});t.beginPath();for(let A=0;A<nt.length;A++)for(let I=0;I<nt[A].length;I++)!((O=nt[A])===null||O===void 0)&&O[I]&&R.draw(U+A*s,z+I*s,s,(F,Q)=>{var P;return!!(!((P=nt[A+F])===null||P===void 0)&&P[I+Q])})}if(!((C=i.cornersSquareOptions)===null||C===void 0)&&C.gradient){const R=i.cornersSquareOptions.gradient,A=this._createGradient({context:t,options:R,additionalRotation:v,x:U,y:z,size:n});R.colorStops.forEach(({offset:I,color:F})=>{A.addColorStop(I,F)}),t.fillStyle=t.strokeStyle=A}else!((L=i.cornersSquareOptions)===null||L===void 0)&&L.color&&(t.fillStyle=t.strokeStyle=i.cornersSquareOptions.color);if(t.fill("evenodd"),(B=i.cornersDotOptions)===null||B===void 0?void 0:B.type){const R=new _t({context:t,type:(q=i.cornersDotOptions)===null||q===void 0?void 0:q.type});t.beginPath(),R.draw(U+2*s,z+2*s,a,v)}else{const R=new Z({context:t,type:i.dotsOptions.type});t.beginPath();for(let A=0;A<st.length;A++)for(let I=0;I<st[A].length;I++)!(($=st[A])===null||$===void 0)&&$[I]&&R.draw(U+A*s,z+I*s,s,(F,Q)=>{var P;return!!(!((P=st[A+F])===null||P===void 0)&&P[I+Q])})}if(!((D=i.cornersDotOptions)===null||D===void 0)&&D.gradient){const R=i.cornersDotOptions.gradient,A=this._createGradient({context:t,options:R,additionalRotation:v,x:U+2*s,y:z+2*s,size:a});R.colorStops.forEach(({offset:I,color:F})=>{A.addColorStop(I,F)}),t.fillStyle=t.strokeStyle=A}else!((X=i.cornersDotOptions)===null||X===void 0)&&X.color&&(t.fillStyle=t.strokeStyle=i.cornersDotOptions.color);t.fill("evenodd")})}loadImage(){return new Promise((e,t)=>{const i=this._options,r=new Image;if(!i.image)return t("Image is not defined");typeof i.imageOptions.crossOrigin=="string"&&(r.crossOrigin=i.imageOptions.crossOrigin),this._image=r,r.onload=()=>{e()},r.src=i.image})}drawImage({width:e,height:t,count:i,dotSize:r}){const o=this.context;if(!o)throw"canvasContext is not defined";if(!this._image)throw"image is not defined";const s=this._options,n=Math.floor((s.width-i*r)/2),a=Math.floor((s.height-i*r)/2),d=n+s.imageOptions.margin+(i*r-e)/2,h=a+s.imageOptions.margin+(i*r-t)/2,c=e-2*s.imageOptions.margin,g=t-2*s.imageOptions.margin;o.drawImage(this._image,d,h,c<0?0:c,g<0?0:g)}_createGradient({context:e,options:t,additionalRotation:i,x:r,y:o,size:s}){let n;if(t.type===pt)n=e.createRadialGradient(r+s/2,o+s/2,0,r+s/2,o+s/2,s/2);else{const a=((t.rotation||0)+i)%(2*Math.PI),d=(a+2*Math.PI)%(2*Math.PI);let h=r+s/2,c=o+s/2,g=r+s/2,v=o+s/2;d>=0&&d<=.25*Math.PI||d>1.75*Math.PI&&d<=2*Math.PI?(h-=s/2,c-=s/2*Math.tan(a),g+=s/2,v+=s/2*Math.tan(a)):d>.25*Math.PI&&d<=.75*Math.PI?(c-=s/2,h-=s/2/Math.tan(a),v+=s/2,g+=s/2/Math.tan(a)):d>.75*Math.PI&&d<=1.25*Math.PI?(h+=s/2,c+=s/2*Math.tan(a),g-=s/2,v-=s/2*Math.tan(a)):d>1.25*Math.PI&&d<=1.75*Math.PI&&(c+=s/2,h+=s/2/Math.tan(a),v-=s/2,g-=s/2/Math.tan(a)),n=e.createLinearGradient(Math.round(h),Math.round(c),Math.round(g),Math.round(v))}return n}}class wt{constructor({svg:e,type:t}){this._svg=e,this._type=t}draw(e,t,i,r){let o;switch(this._type){case V:o=this._drawDot;break;case Y:o=this._drawClassy;break;case W:o=this._drawClassyRounded;break;case ot:o=this._drawRounded;break;case k:o=this._drawExtraRounded;break;default:o=this._drawSquare}o.call(this,{x:e,y:t,size:i,getNeighbor:r})}_rotateFigure({x:e,y:t,size:i,rotation:r=0,draw:o}){var s;const n=e+i/2,a=t+i/2;o(),(s=this._element)===null||s===void 0||s.setAttribute("transform",`rotate(${180*r/Math.PI},${n},${a})`)}_basicDot(e){const{size:t,x:i,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(i+t/2)),this._element.setAttribute("cy",String(r+t/2)),this._element.setAttribute("r",String(t/2))}}))}_basicSquare(e){const{size:t,x:i,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(i)),this._element.setAttribute("y",String(r)),this._element.setAttribute("width",String(t)),this._element.setAttribute("height",String(t))}}))}_basicSideRounded(e){const{size:t,x:i,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${i} ${r}v ${t}h `+t/2+`a ${t/2} ${t/2}, 0, 0, 0, 0 ${-t}`)}}))}_basicCornerRounded(e){const{size:t,x:i,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${i} ${r}v ${t}h ${t}v `+-t/2+`a ${t/2} ${t/2}, 0, 0, 0, ${-t/2} ${-t/2}`)}}))}_basicCornerExtraRounded(e){const{size:t,x:i,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${i} ${r}v ${t}h ${t}a ${t} ${t}, 0, 0, 0, ${-t} ${-t}`)}}))}_basicCornersRounded(e){const{size:t,x:i,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${i} ${r}v `+t/2+`a ${t/2} ${t/2}, 0, 0, 0, ${t/2} ${t/2}h `+t/2+"v "+-t/2+`a ${t/2} ${t/2}, 0, 0, 0, ${-t/2} ${-t/2}`)}}))}_drawDot({x:e,y:t,size:i}){this._basicDot({x:e,y:t,size:i,rotation:0})}_drawSquare({x:e,y:t,size:i}){this._basicSquare({x:e,y:t,size:i,rotation:0})}_drawRounded({x:e,y:t,size:i,getNeighbor:r}){const o=r?+r(-1,0):0,s=r?+r(1,0):0,n=r?+r(0,-1):0,a=r?+r(0,1):0,d=o+s+n+a;if(d!==0)if(d>2||o&&s||n&&a)this._basicSquare({x:e,y:t,size:i,rotation:0});else{if(d===2){let h=0;return o&&n?h=Math.PI/2:n&&s?h=Math.PI:s&&a&&(h=-Math.PI/2),void this._basicCornerRounded({x:e,y:t,size:i,rotation:h})}if(d===1){let h=0;return n?h=Math.PI/2:s?h=Math.PI:a&&(h=-Math.PI/2),void this._basicSideRounded({x:e,y:t,size:i,rotation:h})}}else this._basicDot({x:e,y:t,size:i,rotation:0})}_drawExtraRounded({x:e,y:t,size:i,getNeighbor:r}){const o=r?+r(-1,0):0,s=r?+r(1,0):0,n=r?+r(0,-1):0,a=r?+r(0,1):0,d=o+s+n+a;if(d!==0)if(d>2||o&&s||n&&a)this._basicSquare({x:e,y:t,size:i,rotation:0});else{if(d===2){let h=0;return o&&n?h=Math.PI/2:n&&s?h=Math.PI:s&&a&&(h=-Math.PI/2),void this._basicCornerExtraRounded({x:e,y:t,size:i,rotation:h})}if(d===1){let h=0;return n?h=Math.PI/2:s?h=Math.PI:a&&(h=-Math.PI/2),void this._basicSideRounded({x:e,y:t,size:i,rotation:h})}}else this._basicDot({x:e,y:t,size:i,rotation:0})}_drawClassy({x:e,y:t,size:i,getNeighbor:r}){const o=r?+r(-1,0):0,s=r?+r(1,0):0,n=r?+r(0,-1):0,a=r?+r(0,1):0;o+s+n+a!==0?o||n?s||a?this._basicSquare({x:e,y:t,size:i,rotation:0}):this._basicCornerRounded({x:e,y:t,size:i,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:t,size:i,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:t,size:i,rotation:Math.PI/2})}_drawClassyRounded({x:e,y:t,size:i,getNeighbor:r}){const o=r?+r(-1,0):0,s=r?+r(1,0):0,n=r?+r(0,-1):0,a=r?+r(0,1):0;o+s+n+a!==0?o||n?s||a?this._basicSquare({x:e,y:t,size:i,rotation:0}):this._basicCornerExtraRounded({x:e,y:t,size:i,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:t,size:i,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:t,size:i,rotation:Math.PI/2})}}class mt{constructor({svg:e,type:t}){this._svg=e,this._type=t}draw(e,t,i,r){let o;switch(this._type){case ht:o=this._drawSquare;break;case tt:o=this._drawExtraRounded;break;default:o=this._drawDot}o.call(this,{x:e,y:t,size:i,rotation:r})}_rotateFigure({x:e,y:t,size:i,rotation:r=0,draw:o}){var s;const n=e+i/2,a=t+i/2;o(),(s=this._element)===null||s===void 0||s.setAttribute("transform",`rotate(${180*r/Math.PI},${n},${a})`)}_basicDot(e){const{size:t,x:i,y:r}=e,o=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${i+t/2} ${r}a ${t/2} ${t/2} 0 1 0 0.1 0zm 0 ${o}a ${t/2-o} ${t/2-o} 0 1 1 -0.1 0Z`)}}))}_basicSquare(e){const{size:t,x:i,y:r}=e,o=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${i} ${r}v ${t}h ${t}v `+-t+`zM ${i+o} ${r+o}h `+(t-2*o)+"v "+(t-2*o)+"h "+(2*o-t)+"z")}}))}_basicExtraRounded(e){const{size:t,x:i,y:r}=e,o=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${i} ${r+2.5*o}v `+2*o+`a ${2.5*o} ${2.5*o}, 0, 0, 0, ${2.5*o} ${2.5*o}h `+2*o+`a ${2.5*o} ${2.5*o}, 0, 0, 0, ${2.5*o} ${2.5*-o}v `+-2*o+`a ${2.5*o} ${2.5*o}, 0, 0, 0, ${2.5*-o} ${2.5*-o}h `+-2*o+`a ${2.5*o} ${2.5*o}, 0, 0, 0, ${2.5*-o} ${2.5*o}M ${i+2.5*o} ${r+o}h `+2*o+`a ${1.5*o} ${1.5*o}, 0, 0, 1, ${1.5*o} ${1.5*o}v `+2*o+`a ${1.5*o} ${1.5*o}, 0, 0, 1, ${1.5*-o} ${1.5*o}h `+-2*o+`a ${1.5*o} ${1.5*o}, 0, 0, 1, ${1.5*-o} ${1.5*-o}v `+-2*o+`a ${1.5*o} ${1.5*o}, 0, 0, 1, ${1.5*o} ${1.5*-o}`)}}))}_drawDot({x:e,y:t,size:i,rotation:r}){this._basicDot({x:e,y:t,size:i,rotation:r})}_drawSquare({x:e,y:t,size:i,rotation:r}){this._basicSquare({x:e,y:t,size:i,rotation:r})}_drawExtraRounded({x:e,y:t,size:i,rotation:r}){this._basicExtraRounded({x:e,y:t,size:i,rotation:r})}}class bt{constructor({svg:e,type:t}){this._svg=e,this._type=t}draw(e,t,i,r){let o;o=this._type===ct?this._drawSquare:this._drawDot,o.call(this,{x:e,y:t,size:i,rotation:r})}_rotateFigure({x:e,y:t,size:i,rotation:r=0,draw:o}){var s;const n=e+i/2,a=t+i/2;o(),(s=this._element)===null||s===void 0||s.setAttribute("transform",`rotate(${180*r/Math.PI},${n},${a})`)}_basicDot(e){const{size:t,x:i,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(i+t/2)),this._element.setAttribute("cy",String(r+t/2)),this._element.setAttribute("r",String(t/2))}}))}_basicSquare(e){const{size:t,x:i,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(i)),this._element.setAttribute("y",String(r)),this._element.setAttribute("width",String(t)),this._element.setAttribute("height",String(t))}}))}_drawDot({x:e,y:t,size:i,rotation:r}){this._basicDot({x:e,y:t,size:i,rotation:r})}_drawSquare({x:e,y:t,size:i,rotation:r}){this._basicSquare({x:e,y:t,size:i,rotation:r})}}const at=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],f=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class p{constructor(e){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(e.width)),this._element.setAttribute("height",String(e.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._style=document.createElementNS("http://www.w3.org/2000/svg","style"),this._options=e}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}clear(){var e;const t=this._element;this._element=t.cloneNode(!1),(e=t==null?void 0:t.parentNode)===null||e===void 0||e.replaceChild(this._element,t),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._style=document.createElementNS("http://www.w3.org/2000/svg","style"),this._element.appendChild(this._style),this._element.appendChild(this._defs)}async drawQR(e){const t=e.getModuleCount(),i=Math.min(this._options.width,this._options.height)-2*this._options.margin,r=Math.floor(i/t);let o={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=e,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:s,qrOptions:n}=this._options,a=s.imageSize*ft[n.errorCorrectionLevel],d=Math.floor(a*t*t);o=gt({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:d,maxHiddenAxisDots:t-14,dotSize:r})}this._element.appendChild(this._style),this._element.appendChild(this._defs),this.clear(),this.drawBackground(),this.drawDots((s,n)=>{var a,d,h,c,g,v;return!(this._options.imageOptions.hideBackgroundDots&&s>=(t-o.hideXDots)/2&&s<(t+o.hideXDots)/2&&n>=(t-o.hideYDots)/2&&n<(t+o.hideYDots)/2||!((a=at[s])===null||a===void 0)&&a[n]||!((d=at[s-t+7])===null||d===void 0)&&d[n]||!((h=at[s])===null||h===void 0)&&h[n-t+7]||!((c=f[s])===null||c===void 0)&&c[n]||!((g=f[s-t+7])===null||g===void 0)&&g[n]||!((v=f[s])===null||v===void 0)&&v[n-t+7])}),this.drawCorners(),this._options.image&&await this.drawImage({width:o.width,height:o.height,count:t,dotSize:r})}drawBackground(){var e,t,i;const r=this._element,o=this._options;if(r){const s=(e=o.backgroundOptions)===null||e===void 0?void 0:e.gradient,n=(t=o.backgroundOptions)===null||t===void 0?void 0:t.color;s?this._createColor({options:s,color:n,additionalRotation:0,x:0,y:0,height:o.height,width:o.width,name:"background-color"}):!((i=o.backgroundOptions)===null||i===void 0)&&i.color&&this._createStyle({color:n,name:"background-color"})}}drawDots(e){var t,i,r;if(!this._qr)throw"QR code is not defined";const o=this._options,s=this._qr.getModuleCount();if(s>o.width||s>o.height)throw"The canvas is too small.";const n=Math.min(o.width,o.height)-2*o.margin,a=Math.floor(n/s),d=Math.floor((o.width-s*a)/2),h=Math.floor((o.height-s*a)/2),c=new wt({svg:this._element,type:o.dotsOptions.type});!((t=o.dotsOptions)===null||t===void 0)&&t.gradient?(this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(i=o.dotsOptions)===null||i===void 0?void 0:i.gradient,color:o.dotsOptions.color,additionalRotation:0,x:d,y:h,height:s*a,width:s*a,name:"dot-color"})):o.dotsOptions.color&&(this._dots=document.createElementNS("http://www.w3.org/2000/svg","g"),this._dots.setAttribute("class","dot-color"),this._element.appendChild(this._dots),this._createStyle({color:o.dotsOptions.color,name:"dot-color"}));for(let g=0;g<s;g++)for(let v=0;v<s;v++){if(e&&!e(g,v)||!(!((r=this._qr)===null||r===void 0)&&r.isDark(g,v)))continue;const b=this._options.useLegacyDotRotation?d+g*a:h+v*a,S=this._options.useLegacyDotRotation?h+v*a:d+g*a;c.draw(b,S,a,(O,C)=>this._options.useLegacyDotRotation?!(g+O<0||v+C<0||g+O>=s||v+C>=s)&&!(e&&!e(g+O,v+C))&&!!this._qr&&this._qr.isDark(g+O,v+C):!(v+O<0||g+C<0||v+O>=s||g+C>=s)&&!(e&&!e(v+O,g+C))&&!!this._qr&&this._qr.isDark(g+C,v+O)),c._element&&this._dotsClipPath?this._dotsClipPath.appendChild(c._element):c._element&&this._dots&&this._dots.appendChild(c._element)}}drawCorners(){if(!this._qr)throw"QR code is not defined";const e=this._element,t=this._options;if(!e)throw"Element code is not defined";const i=this._qr.getModuleCount(),r=Math.min(t.width,t.height)-2*t.margin,o=Math.floor(r/i),s=7*o,n=3*o,a=Math.floor((t.width-i*o)/2),d=Math.floor((t.height-i*o)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([h,c,g])=>{var v,b,S,O,C,L,B,q,$,D,X,U,z,R;const A=a+h*o*(i-7),I=d+c*o*(i-7);let F=this._dotsClipPath,Q=this._dotsClipPath;if(!((v=t.cornersSquareOptions)===null||v===void 0)&&v.gradient?(F=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),F.setAttribute("id",`clip-path-corners-square-color-${h}-${c}`),this._defs.appendChild(F),this._cornersSquareClipPath=this._cornersDotClipPath=Q=F,this._createColor({options:(b=t.cornersSquareOptions)===null||b===void 0?void 0:b.gradient,color:(S=t.cornersSquareOptions)===null||S===void 0?void 0:S.color,additionalRotation:g,x:A,y:I,height:s,width:s,name:`corners-square-color-${h}-${c}`})):(this._cornerSquares=document.createElementNS("http://www.w3.org/2000/svg","g"),this._cornerSquares.setAttribute("class",`corners-square-color-${h}-${c}`),this._element.appendChild(this._cornerSquares),this._createStyle({color:(O=t.cornersSquareOptions)===null||O===void 0?void 0:O.color,name:`corners-square-color-${h}-${c}`})),(C=t.cornersSquareOptions)===null||C===void 0?void 0:C.type){const P=new mt({svg:this._element,type:t.cornersSquareOptions.type});P.draw(A,I,s,g),!((L=t.cornersSquareOptions)===null||L===void 0)&&L.gradient&&P._element&&F?F.appendChild(P._element):P._element&&this._cornerSquares&&this._cornerSquares.appendChild(P._element)}else{const P=new wt({svg:this._element,type:t.dotsOptions.type});for(let J=0;J<at.length;J++)for(let et=0;et<at[J].length;et++)!((B=at[J])===null||B===void 0)&&B[et]&&(P.draw(A+J*o,I+et*o,o,(xt,Mt)=>{var dt;return!!(!((dt=at[J+xt])===null||dt===void 0)&&dt[et+Mt])}),P._element&&this._cornersSquareClipPath?this._cornersSquareClipPath.appendChild(P._element):P._element&&this._cornerSquares&&this._cornerSquares.appendChild(P._element))}if(!((q=t.cornersDotOptions)===null||q===void 0)&&q.gradient?(Q=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),Q.setAttribute("id",`clip-path-corners-dot-color-${h}-${c}`),this._defs.appendChild(Q),this._cornersDotClipPath=Q,this._createColor({options:($=t.cornersDotOptions)===null||$===void 0?void 0:$.gradient,color:(D=t.cornersDotOptions)===null||D===void 0?void 0:D.color,additionalRotation:g,x:A+2*o,y:I+2*o,height:n,width:n,name:`corners-dot-color-${h}-${c}`})):(this._cornerDots=document.createElementNS("http://www.w3.org/2000/svg","g"),this._cornerDots.setAttribute("class",`corners-dot-color-${h}-${c}`),this._element.appendChild(this._cornerDots),this._createStyle({color:(X=t.cornersDotOptions)===null||X===void 0?void 0:X.color,name:`corners-dot-color-${h}-${c}`})),(U=t.cornersDotOptions)===null||U===void 0?void 0:U.type){const P=new bt({svg:this._element,type:t.cornersDotOptions.type});P.draw(A+2*o,I+2*o,n,g),!((z=t.cornersDotOptions)===null||z===void 0)&&z.gradient&&P._element&&Q?Q.appendChild(P._element):P._element&&this._cornerDots&&this._cornerDots.appendChild(P._element)}else{const P=new wt({svg:this._element,type:t.dotsOptions.type});for(let J=0;J<f.length;J++)for(let et=0;et<f[J].length;et++)!((R=f[J])===null||R===void 0)&&R[et]&&(P.draw(A+J*o,I+et*o,o,(xt,Mt)=>{var dt;return!!(!((dt=f[J+xt])===null||dt===void 0)&&dt[et+Mt])}),P._element&&this._cornersDotClipPath?this._cornersDotClipPath.appendChild(P._element):P._element&&this._cornerDots&&this._cornerDots.appendChild(P._element))}})}loadImage(){return new Promise((e,t)=>{const i=this._options,r=new Image;if(!i.image)return t("Image is not defined");typeof i.imageOptions.crossOrigin=="string"&&(r.crossOrigin=i.imageOptions.crossOrigin),this._image=r,r.onload=()=>{e()},r.src=i.image})}async drawImage({width:e,height:t,count:i,dotSize:r}){const o=this._options,s=Math.floor((o.width-i*r)/2),n=Math.floor((o.height-i*r)/2),a=s+o.imageOptions.margin+(i*r-e)/2,d=n+o.imageOptions.margin+(i*r-t)/2,h=e-2*o.imageOptions.margin,c=t-2*o.imageOptions.margin,g=document.createElementNS("http://www.w3.org/2000/svg","image"),v=await this._getBase64Image(o.image||"");g.setAttribute("href",v),g.setAttribute("xlink:href",v),g.setAttribute("x",String(a)),g.setAttribute("y",String(d)),g.setAttribute("width",`${h}px`),g.setAttribute("height",`${c}px`),this._element.appendChild(g)}async _getImageBlob(e){return(await fetch(e)).blob()}_blobToBase64(e){return new Promise(t=>{const i=new FileReader;i.onload=function(){const r=i.result;t(r)},i.readAsDataURL(e)})}async _getBase64Image(e){if(e==="")return new Promise(i=>{i("")});const t=await this._getImageBlob(e);return await this._blobToBase64(t)}_createColor({options:e,color:t,additionalRotation:i,x:r,y:o,height:s,width:n,name:a}){const d=n>s?n:s,h=document.createElementNS("http://www.w3.org/2000/svg","rect");if(h.setAttribute("x",String(r)),h.setAttribute("y",String(o)),h.setAttribute("height",String(s)),h.setAttribute("width",String(n)),h.setAttribute("clip-path",`url('#clip-path-${a}')`),e){let c;if(e.type===pt)c=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),c.setAttribute("id",a),c.setAttribute("gradientUnits","userSpaceOnUse"),c.setAttribute("fx",String(r+n/2)),c.setAttribute("fy",String(o+s/2)),c.setAttribute("cx",String(r+n/2)),c.setAttribute("cy",String(o+s/2)),c.setAttribute("r",String(d/2));else{const g=((e.rotation||0)+i)%(2*Math.PI),v=(g+2*Math.PI)%(2*Math.PI);let b=r+n/2,S=o+s/2,O=r+n/2,C=o+s/2;v>=0&&v<=.25*Math.PI||v>1.75*Math.PI&&v<=2*Math.PI?(b-=n/2,S-=s/2*Math.tan(g),O+=n/2,C+=s/2*Math.tan(g)):v>.25*Math.PI&&v<=.75*Math.PI?(S-=s/2,b-=n/2/Math.tan(g),C+=s/2,O+=n/2/Math.tan(g)):v>.75*Math.PI&&v<=1.25*Math.PI?(b+=n/2,S+=s/2*Math.tan(g),O-=n/2,C-=s/2*Math.tan(g)):v>1.25*Math.PI&&v<=1.75*Math.PI&&(S+=s/2,b+=n/2/Math.tan(g),C-=s/2,O-=n/2/Math.tan(g)),c=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),c.setAttribute("id",a),c.setAttribute("gradientUnits","userSpaceOnUse"),c.setAttribute("x1",String(Math.round(b))),c.setAttribute("y1",String(Math.round(S))),c.setAttribute("x2",String(Math.round(O))),c.setAttribute("y2",String(Math.round(C)))}e.colorStops.forEach(({offset:g,color:v})=>{const b=document.createElementNS("http://www.w3.org/2000/svg","stop");b.setAttribute("offset",100*g+"%"),b.setAttribute("stop-color",v),c.appendChild(b)}),h.setAttribute("fill",`url('#${a}')`),this._defs.appendChild(c)}else t&&h.setAttribute("fill",t);this._element.appendChild(h)}_createStyle({color:e,name:t}){this._style.innerHTML+=`.${t}{ fill: ${e}; }`}}const w="canvas",u={};for(let M=0;M<=40;M++)u[M]=M;const l={type:w,width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:u[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:"anonymous",margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{color:"#fff"},useLegacyDotRotation:!1};function _(M){const e=Object.assign({},M);if(!e.colorStops||!e.colorStops.length)throw"Field 'colorStops' is required in gradient";return e.rotation?e.rotation=Number(e.rotation):e.rotation=0,e.colorStops=e.colorStops.map(t=>Object.assign(Object.assign({},t),{offset:Number(t.offset)})),e}function y(M){const e=Object.assign({},M);return e.width=Number(e.width),e.height=Number(e.height),e.margin=Number(e.margin),e.imageOptions=Object.assign(Object.assign({},e.imageOptions),{hideBackgroundDots:!!e.imageOptions.hideBackgroundDots,imageSize:Number(e.imageOptions.imageSize),margin:Number(e.imageOptions.margin)}),e.margin>Math.min(e.width,e.height)&&(e.margin=Math.min(e.width,e.height)),e.dotsOptions=Object.assign({},e.dotsOptions),e.dotsOptions.gradient&&(e.dotsOptions.gradient=_(e.dotsOptions.gradient)),e.cornersSquareOptions&&(e.cornersSquareOptions=Object.assign({},e.cornersSquareOptions),e.cornersSquareOptions.gradient&&(e.cornersSquareOptions.gradient=_(e.cornersSquareOptions.gradient))),e.cornersDotOptions&&(e.cornersDotOptions=Object.assign({},e.cornersDotOptions),e.cornersDotOptions.gradient&&(e.cornersDotOptions.gradient=_(e.cornersDotOptions.gradient))),e.backgroundOptions&&(e.backgroundOptions=Object.assign({},e.backgroundOptions),e.backgroundOptions.gradient&&(e.backgroundOptions.gradient=_(e.backgroundOptions.gradient))),e}var m=H(192),x=H.n(m);class j{constructor(e){this._options=e?y(T(l,e)):l,this.update()}static _clearContainer(e){e&&(e.innerHTML="")}async _getQRStylingElement(e){if(!this._qr)throw"QR code is empty";if(e.toLowerCase()==="svg"){let t,i;return this._svg&&this._svgDrawingPromise?(i=this._svg,t=this._svgDrawingPromise):(i=new p(this._options),t=i.drawQR(this._qr)),await t,i}{let t,i;return this._canvas&&this._canvasDrawingPromise?(i=this._canvas,t=this._canvasDrawingPromise):(i=new vt(this._options),t=i.drawQR(this._qr)),await t,i}}update(e){j._clearContainer(this._container),this._options=e?y(T(this._options,e)):this._options,this._options.data&&(this._qr=x()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(t){switch(!0){case/^[0-9]*$/.test(t):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(t):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===w?(this._canvas=new vt(this._options),this._canvasDrawingPromise=this._canvas.drawQR(this._qr),this._svgDrawingPromise=void 0,this._svg=void 0):(this._svg=new p(this._options),this._svgDrawingPromise=this._svg.drawQR(this._qr),this._canvasDrawingPromise=void 0,this._canvas=void 0),this.append(this._container))}append(e){if(e){if(typeof e.appendChild!="function")throw"Container should be a single DOM node";this._options.type===w?this._canvas&&e.appendChild(this._canvas.getCanvas()):this._svg&&e.appendChild(this._svg.getElement()),this._container=e}}async getRawData(e="png",t){if(!this._qr)throw"QR code is empty";const i=e.toLocaleLowerCase();if(i==="svg"){const r=await this._getQRStylingElement(i),o=new XMLSerializer().serializeToString(r.getElement());return new Blob([`<?xml version="1.0" standalone="no"?>\r
`+o],{type:"image/svg+xml"})}{const r=await this._getQRStylingElement(i);return new Promise(o=>r.getCanvas().toBlob(o,`image/${i}`,t))}}async toDataUrl(e="png",t){if(!this._qr)throw"QR code is empty";const i=e.toLocaleLowerCase();return(await this._getQRStylingElement(i)).getCanvas().toDataURL(`image/${i}`,t)}async download(e){if(!this._qr)throw"QR code is empty";let t="png",i="qr";typeof e=="object"&&e!==null&&(e.name&&(i=e.name),e.extension&&(t=e.extension));const r=t.toLocaleLowerCase();if(r==="svg"){const o=await this._getQRStylingElement(r);let s=new XMLSerializer().serializeToString(o.getElement());s=`<?xml version="1.0" standalone="no"?>\r
`+s,G("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(s),`${i}.svg`)}else G((await this._getQRStylingElement(r)).getCanvas().toDataURL(`image/${t}`),`${i}.${t}`)}}const E=j})(),ut.default})())})(St);var Ot=St.exports;const Pt=Dt(Ot),zt=Ct({__proto__:null,default:Pt},[Ot]);export{zt as s};
